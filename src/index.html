<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>RaccoonGame</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }
    </style>

</head>

<body class="player-body">
<!-- case 1: sceneConfig from localStorage -->
<!-- <kiddo-player local-storage-key="kiddo_default_task_from_storage"></kiddo-player>
<script></script> -->

<!-- case 2: sceneConfig from URL -->
<!-- <kiddo-player kiddo-scene-config="http://192.168.196.173:91/ru/raccoon/task1/task.yaml"></kiddo-player>-->

<!-- case3: sceneConfig from variable -->
<kiddo-player></kiddo-player>


<!--  <script>-->
<!--    const appConfig = {-->
<!--      // language: {-->
<!--      //   useOnly: 'ru'-->
<!--      // },-->
<!--      analytics: {-->
<!--        GA_key: 'UA-159399120-1'-->
<!--      }-->
<!--    };-->
<!--    const rootElement = document.querySelector('kiddo-player');-->
<!--    rootElement.setAttribute('kiddo-app-config', JSON.stringify(appConfig));-->
<!--  </script>-->

<!-- <script>
  if (appConfig.analytics.GA_key) {
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', appConfig.analytics.GA_key, 'auto');
    ga('send', 'pageview');
  }
</script> -->

<script>


    const sceneConfig = `
    sceneType: CONSOLEMATH
    generatingFunc: >-
      const a = [];
      let l = Math.floor(Math.random() * 9 + 1);
      for (let i = 0; i < l; i ++) {
        a.push(Math.floor(Math.random() * 9 + 1));
      }

      const arrayToMap = (arr) => arr.reduce((o, e) => {o[e] = (o[e] || 0) + 1; return o;}, {});

      this.addConsoleVariable('a', a);
      this.addConsoleVariable('b');
      this.addCheckingLogic((reader) => {
        const b = reader.getConsoleVariableValue('b')
        for (let i = 0; i !== b.length - 1; i++) {
          if (b[i] > b[i + 1]) {
            return 'error';
          }
        }

        const ao = arrayToMap(a);
        const bo = arrayToMap(b);
        for (let k in {...ao, ...bo}) {
          if (ao[k] !== bo[k]) return 'error';
        }

        return null;
      });
    winButton:
      url: ./task2
      text: Следующий уровень
    initialScript: |-
      import raccoon
      # Add your code here
    taskDescription: Доведи енота до флага
    `;
    // DON'T EDIT THE CODE BELOW
    const rootElement = document.querySelector('kiddo-player');
    rootElement.setAttribute('kiddo-scene-config', sceneConfig);
    rootElement.setAttribute('kiddo-app-config', JSON.stringify(appConfig));
</script>
</body>

</html>
